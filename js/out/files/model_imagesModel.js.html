<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>model\imagesModel.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/fan1xia.Failed.html">fan1xia.Failed</a></li>
            
                <li><a href="../classes/fan1xia.Failed.prototype.html">fan1xia.Failed.prototype</a></li>
            
                <li><a href="../classes/fan1xia.Index.html">fan1xia.Index</a></li>
            
                <li><a href="../classes/fan1xia.Index.prototype.html">fan1xia.Index.prototype</a></li>
            
                <li><a href="../classes/fan1xia.model.Canvas.html">fan1xia.model.Canvas</a></li>
            
                <li><a href="../classes/fan1xia.model.Canvas.prototype.html">fan1xia.model.Canvas.prototype</a></li>
            
                <li><a href="../classes/fan1xia.model.Images.html">fan1xia.model.Images</a></li>
            
                <li><a href="../classes/fan1xia.model.Images.prototype.html">fan1xia.model.Images.prototype</a></li>
            
                <li><a href="../classes/fan1xia.model.Score.html">fan1xia.model.Score</a></li>
            
                <li><a href="../classes/fan1xia.model.Score.prototype.html">fan1xia.model.Score.prototype</a></li>
            
                <li><a href="../classes/fan1xia.model.StorageModel.html">fan1xia.model.StorageModel</a></li>
            
                <li><a href="../classes/fan1xia.model.StorageModel.prototype.html">fan1xia.model.StorageModel.prototype</a></li>
            
                <li><a href="../classes/fan1xia.model.Store.html">fan1xia.model.Store</a></li>
            
                <li><a href="../classes/fan1xia.model.Store.prototype.html">fan1xia.model.Store.prototype</a></li>
            
                <li><a href="../classes/fan1xia.model.Timer.html">fan1xia.model.Timer</a></li>
            
                <li><a href="../classes/fan1xia.model.Timer.prototype.html">fan1xia.model.Timer.prototype</a></li>
            
                <li><a href="../classes/fan1xia.Success.html">fan1xia.Success</a></li>
            
                <li><a href="../classes/fan1xia.Success.prototype.html">fan1xia.Success.prototype</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/canvasModel.html">canvasModel</a></li>
            
                <li><a href="../modules/imagesModel.html">imagesModel</a></li>
            
                <li><a href="../modules/index.html">index</a></li>
            
                <li><a href="../modules/storageModel.html">storageModel</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: model\imagesModel.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/** 
* 图片组对象
*
* @module imagesModel
* @namespace fan1xia.model
* @main imagesModel
* @author 颜海镜
* @version 2012-09-29 15:20:04
*/
(function($, window){
	&#x27;use strict&#x27;;
	
	/**
	* 图片类类
	* @class Images
	* @constructor
	* @extends fan1xia.model.Images.prototype
	*/
	var Images = function(){
	    /**
	     * 图片名称数组
	     * @property images
	     * @type Array
	     * @default [...]
	     */
		this.images = [&#x27;Alien1.bmp&#x27;,
                &#x27;Alien2.bmp&#x27;,
                &#x27;Balloon.bmp&#x27;,
                &#x27;Bear.bmp&#x27;,
                &#x27;Beaver.bmp&#x27;,
                &#x27;BirthdayCake.bmp&#x27;,
                &#x27;ChocolateCake.bmp&#x27;,
                &#x27;DaVinci.bmp&#x27;,
                &#x27;Dragon.bmp&#x27;,
                &#x27;Earth.bmp&#x27;,
                &#x27;Fireworks1.bmp&#x27;,
                &#x27;Fireworks2.bmp&#x27;,
                &#x27;Fish.bmp&#x27;,
                &#x27;Frog1.bmp&#x27;,
                &#x27;Frog2.bmp&#x27;,
                &#x27;Hand.bmp&#x27;,
                &#x27;Hitchcock.bmp&#x27;,
                &#x27;Leaf.bmp&#x27;,
                &#x27;Monkey1.bmp&#x27;,
                &#x27;Monkey2.bmp&#x27;,
                &#x27;Moon.bmp&#x27;,
                &#x27;Owl.bmp&#x27;,
                &#x27;PartyHat.bmp&#x27;,
                &#x27;Penguin.bmp&#x27;,
                &#x27;Rabbit.bmp&#x27;,
                &#x27;Rose.bmp&#x27;,
                &#x27;Sun.bmp&#x27;,
                &#x27;Women.bmp&#x27;,
                &#x27;get.gif&#x27;,
                &#x27;panda.gif&#x27;,
                &#x27;elephant.gif&#x27;,
                &#x27;haitun.gif&#x27;
            ];
        
        /**
         * 图片路径数组
         * @property imagesSrc
         * @type Array
         * @default []
         */    
        this.imagesSrc = [];
        
        /**
         * 图片对象数组
         * @property imgs
         * @type Array
         * @default []
         */
        this.imgs = [];
	};
	
	/**
	* Images构造函数的原型对象
	* @class Images.prototype
	* @static
	*/
	Images.prototype = {
	    /**
         * 初始化
         * @method init 
         */
		init:function(){
		      this.initImagesSrc();//初始化路径
		      this.loadImages(this.getImagesSrc());
		},
		/**
		 * 初始化图象的路径 
		 * @method initImagesSrc
		 * @return {Array} imgSrc 初始化完的图片路径数组
		 */
		initImagesSrc:function(){
			var
				imgSrc = [],
				i = 0,
				images = this.images,
				len = images.length;
				
			for(i; i &lt; len; i = i + 1){
				imgSrc[i] = &#x27;./images/&#x27; + images[i];
			}
			
			$.extend(true, this.imagesSrc, imgSrc);//扩展自身属性
			return imgSrc;
		},
		
		/**
         * 获取图片路径数组
         * @method getImagesSrc
         * @return {Array} 图片路径数组 
         */
		getImagesSrc:function(){
		  return $.extend(true, [], this.imagesSrc);
		},
		
		/**
		 * 载入图片对象
		 * @method loadImages
		 * @param {Array} imgSrcs 图片路径数组
		 * @return {Array} imgs 图片对象
		 */
		loadImages:function(imgSrcs){
			var 
				imgs = [],
				i = 0,
				len = imgSrcs.length;
				
			for(i; i &lt; len; i = i + 1){
				imgs[i] = new Image();
				imgs[i].src = imgSrcs[i];
			}
			
			$.extend(true, this.imgs, imgs);//扩展自身属性
			return imgs;
		},
		
		/**
		 * 获取图片对象数组
		 * @method getImageObjs
		 * @return {Array} 图片对象数组
		 */
		getImageObjs:function(){
		      return $.extend(true, [], this.imgs); 
		},
		
		/*
		 * 创建图片dom节点
		 * @method createImagesDom
		 * @param {Array} images 图象的数组
		 * @return {Array} imgsDom 图象的dom节点数组
		 */
		createImagesDom:function(images){
			var
				imgsDom = [],
				i = 0,
				len = images.length,
				_$ = $;
				
			for(i; i &lt; len; i = i + 1){
				imgsDom[i] = _$(&#x27;&lt;img src=&quot;./images/Shamrock.bmp&quot; rel=&quot;&#x27; + images[i].src + &#x27;&quot;&gt;&#x27;);
			}
			
			return imgsDom;
		},
		
		/**
		 * 随即生成函数
		 * @method randowmImages
		 * @param {Number} num 生成的数量
		 * @param {Array} imagesDom 图片dom数组
		 * @return {Array} images 生成的数组
		 */
		randomImages:function(num, imagesDom){
			var i = 0,
			randomNext = function(){},
			random = Math.random,
			results = [],
			imgSrcs = [],
			imageObjs = [],
			imageDoms = [],
			temps = [],
			len = imagesDom.length;
			
			//深拷贝
			for(i=0; i&lt;len; i++){
				temps[i] = imagesDom[i];
			}
			
			//生成下一个随机数
			randomNext = function(){
				var len=temps.length,
				index = 0;
				while(temps[index] === null){
					index=Math.floor(Math.random()*len);
				}
				
				temps[index] = null;
				return index;//返回index的值
			};
			
			//判断是否有imageDom参数没有自己创建
			if(imagesDom === undefined){
				imgSrcs = this.initImagesSrc();
				imageObjs = this.loadImages(imgSrcs);
				imageDoms = this.createImagesDom(imageObjs);
				
				imagesDom = imageDoms;
			}
			
			for(i = 0; i &lt; num; i = i + 1){
				results[i] = imagesDom[randomNext()];
			}
			
			return results;
		},
		
		/**
		 * 扩展images数组
		 * @method expendImages
		 * @param {Number} grad 梯度
		 * @return {Array} results 返回的结果数组
		 */
		expendImages:function(images, grad){
			var i = 0,
			results = [],
			len = images.length,
			j = 0,
			temp = [],
			_$ = $;
			for(i; i &lt; len; i = i + 1){
				for(j = 0; j &lt; grad; j = j + 1){
					temp[i*grad + j] = _$(&#x27;&lt;img src=&quot;&#x27; + images[i].attr(&#x27;src&#x27;) + &#x27;&quot; rel=&quot;&#x27; + images[i].attr(&#x27;rel&#x27;)+ &#x27;&quot;&gt;&#x27;);
					results.push(temp[i*grad + j]);
				}
			}
			
			return results;
		},
		
		/*
		 * 初始化数组dom对象
		 * @method initImages
		 * @param {num} count 总数
		 * @param {num} grad 有多少个元素相同
		 * @return {Array} results 生成随机的数组
		 */
		initImages:function(count, grad){
			var results = [],
				imgSrcs = [],
				imageObjs = [],
				imageDoms = [],
				num = count / grad,
				expendDoms = [],
				randomDoms = [];
			
			//初始化src对象	
			imgSrcs = this.initImagesSrc();
			//载入image对象
			imageObjs = this.loadImages(imgSrcs);
			//创建doms对象
			imageDoms = this.createImagesDom(imageObjs);
			
			//随机取图象
			randomDoms = this.randomImages(num, imageDoms);
			//扩展图象
			
			expendDoms = this.expendImages(randomDoms, grad);
			
			//随机排列图象
			expendDoms = this.randomImages(expendDoms.length, expendDoms);
			
			return expendDoms;
		},
		
		/**
         * 获取随机获取的图像dom对象数组
         * @method getImageObjs
         * @return {Array} 随机获取的图像dom对象数组
         */
		getImages:function(count, grad){
		    var 
		          results = [],
                  imageObjs = [],
                  imageDoms = [],
                  num = count / grad,
                  expendDoms = [],
                  randomDoms = [];
            //载入image对象
            imageObjs = this.getImageObjs();
            //创建doms对象
            imageDoms = this.createImagesDom(imageObjs);
            
            //随机取图象
            randomDoms = this.randomImages(num, imageDoms);
            //扩展图象
            
            expendDoms = this.expendImages(randomDoms, grad);
            
            //随机排列图象
            expendDoms = this.randomImages(expendDoms.length, expendDoms);
            
            return expendDoms;
		}
	};
	
	window.fan1xia = window.fan1xia || {};
	window.fan1xia.model = window.fan1xia.model || {};	
	window.fan1xia.model.Images = Images;
}(jQuery, window));

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
